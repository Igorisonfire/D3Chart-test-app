(this["webpackJsonpD3Chart-test-app"]=this["webpackJsonpD3Chart-test-app"]||[]).push([[0],{201:function(t,e,n){},202:function(t,e,n){},226:function(t,e,n){},228:function(t,e,n){},230:function(t,e,n){},303:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),s=(n(201),n(202),n(11)),u=n(7),i=n.n(u),l=n(20),d=n(21),j=n(15),b=n(32),f=n(94),h=n.n(f).a.create({baseURL:"https://konuxdata.getsandbox.com",responseType:"json"}),m=function(){return Object(l.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/values");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},p=function(t){return Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.post("/points",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},v=function(t){var e=[],n=[],a=[];return t.forEach((function(t){e=[].concat(Object(d.a)(e),[{value:t.avg,date:t.x}]),n=[].concat(Object(d.a)(n),[{value:t.max,date:t.x}]),a=[].concat(Object(d.a)(a),[{value:t.min,date:t.x}])})),{avg:e,max:n,min:a}},x=Object(b.b)({name:"chart",initialState:{data:[],lines:null,fetchingSend:!1},reducers:{setData:function(t,e){var n=e.payload,a=v(n);return Object(j.a)(Object(j.a)({},t),{},{data:n,lines:a})},setNewSegment:function(t,e){var n=[e.payload].concat(Object(d.a)(t.data)),a=v(n);return Object(j.a)(Object(j.a)({},t),{},{data:n,lines:a})},setFetchingSend:function(t,e){return Object(j.a)(Object(j.a)({},t),{},{fetchingSend:e.payload})}}}),O=x.actions,g=O.setData,k=O.setNewSegment,w=O.setFetchingSend,C=function(t){return t.chart.lines},N=function(t){return t.chart.fetchingSend},y=x.reducer,S=(n(77),n(10)),D=(n(226),n.p+"static/media/button-loader.44dbef48.svg"),E=n(4),F=function(t){var e=t.name,n=t.onClick,a=t.disabled,r=t.loading;return Object(E.jsxs)("button",{disabled:a,onClick:n,className:"button-component ".concat(a?"disabled":""," ").concat(r?"loading":""),type:"button",children:[!r&&Object(E.jsx)("span",{children:e}),r&&Object(E.jsx)("img",{src:D,alt:"load",className:"loading"})]})},B=n(33),I=(n(228),function(t){var e=t.colour,n=t.type,a=t.onChange,r=t.value,c=t.name,o=["input-component",e].join(" ").trim();return Object(E.jsxs)("div",{className:o,children:[Object(E.jsx)("label",{children:c}),Object(E.jsx)("input",{type:n,value:r,onChange:a})]})}),M=function(t){var e=Object(a.useState)(t),n=Object(B.a)(e,2),r=n[0],c=n[1];return{value:r,onChange:function(t){c(t.target.value)},clear:function(){c("")}}},A=n(95),J=n.n(A),R=(n(229),n(230),function(t){var e=t.name,n=t.selected,a=t.onChange;return Object(E.jsxs)("div",{className:"datepicker-custom-component",children:[Object(E.jsx)("label",{children:e}),Object(E.jsx)(J.a,{selected:n,onChange:a,minDate:new Date})]})});function W(){var t=Object(s.b)(),e=Object(s.c)(N),n=M(""),r=M(""),c=M(""),o=function(t){var e=Object(a.useState)(t),n=Object(B.a)(e,2),r=n[0],c=n[1];return{selected:r,onChange:function(t){c(t)},clear:function(){c(null)}}}(null),u=function(){n.clear(),r.clear(),c.clear(),o.clear()},d=!n.value||!r.value||!c.value||!o.selected;return Object(E.jsxs)("form",{className:"chart-form",children:[Object(E.jsx)(I,{colour:"max",name:"Max",type:"number",value:c.value,onChange:c.onChange}),Object(E.jsx)(I,{colour:"avg",name:"Avg",type:"number",value:r.value,onChange:r.onChange}),Object(E.jsx)(I,{colour:"min",name:"Min",type:"number",value:n.value,onChange:n.onChange}),Object(E.jsx)(R,{name:"Date",selected:o.selected,onChange:o.onChange}),Object(E.jsx)(F,{name:"Send",onClick:function(){var e={min:Number(n.value),avg:Number(r.value),max:Number(c.value),x:o.selected?o.selected.toISOString():(new Date).toISOString()};t(function(t){return function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(w(!0));case 3:return e.next=5,p(t);case 5:return e.next=7,n(k(t));case 7:return e.next=9,n(w(!1));case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.next=16,n(w(!1));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}(e)),u()},disabled:d,loading:e})]})}function z(){var t=Object(s.c)(C),e=Object(s.b)(),n=Object(a.useRef)(null);return Object(a.useEffect)((function(){e(function(){var t=Object(l.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m();case 3:return n=t.sent,t.next=6,e(g(n));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){if(t&&n.current){var e=t.min,a=t.avg,r=t.max,c={top:20,right:30,bottom:30,left:40},o=S.e().defined((function(t){return!isNaN(t.value)})).x((function(t){return s(new Date(t.date))})).y((function(t){return u(t.value)})).curve(S.c),s=S.h().domain(S.d(e,(function(t){return new Date(t.date)}))).range([c.left,800-c.right]),u=S.g().domain([0,S.f(e,(function(t){return t.value}))]).nice().range([800-c.bottom,c.top]),i=S.i(n.current).attr("viewBox",[0,0,800,800]);i.select(".x-axis").call((function(t){return t.attr("transform","translate(0,".concat(800-c.bottom,")")).call(S.a(s).ticks(8).tickSizeOuter(0))})),i.select(".y-axis").call((function(t){return t.attr("transform","translate(".concat(c.left,",0)")).call(S.b(u)).call((function(t){return t.select(".tick:last-of-type text").clone().attr("x",3).attr("text-anchor","start").text("Value")}))})),i.select(".max-path").datum(r).transition().duration(300).attr("fill","none").attr("stroke","#00C853").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",o),i.select(".avg-path").datum(a).transition().duration(300).attr("fill","none").attr("stroke","#FFD600").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",o),i.select(".min-path").datum(e).transition().duration(300).attr("fill","none").attr("stroke","#D50000").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",o)}}),[t,n.current]),Object(E.jsxs)("div",{className:"chart-wrapper",children:[Object(E.jsx)(W,{}),Object(E.jsxs)("svg",{className:"d3-component",width:800,height:800,ref:n,children:[Object(E.jsx)("g",{className:"x-axis"}),Object(E.jsx)("g",{className:"y-axis"}),Object(E.jsx)("path",{className:"min-path"}),Object(E.jsx)("path",{className:"avg-path"}),Object(E.jsx)("path",{className:"max-path"})]})]})}var L=function(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(z,{})})},T=Object(b.a)({reducer:{chart:y}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(s.a,{store:T,children:Object(E.jsx)(L,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},77:function(t,e,n){}},[[303,1,2]]]);
//# sourceMappingURL=main.6a5d13d5.chunk.js.map